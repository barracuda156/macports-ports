# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem              1.0
PortGroup               boost 1.0
PortGroup               github 1.0
PortGroup               qmake 1.0

github.setup            lastfm lastfm-desktop 2.1.39
revision                0
categories              audio
maintainers             {@barracuda156 gmail.com:vital.had} openmaintainer
description             Official Last.fm desktop application suite
long_description        {*}${description}
homepage                https://www.last.fm
license                 GPL-3

checksums               rmd160  e1db8c81a55a6535b76b2876ecc38dccc86423c7 \
                        sha256  5755fe6c8b8cddc799e831ea80a5d213a52e93d11141514eeb3af613acaf8a57 \
                        size    4099355
github.tarball_from     archive

depends_build-append    port:gettext

depends_lib-append      path:lib/libavcodec.dylib:ffmpeg \
                        port:fftw-3 \
                        port:liblastfm \
                        port:libsamplerate \
                        port:sqlite3 \
                        port:zlib

patchfiles-append       0001-Drop-sparkle-and-growl.patch \
                        patch-old-systems.diff

post-patch {
    reinplace "s|@ARCH@|${configure.build_arch}|g" ${worksrcpath}/admin/include.qmake
    reinplace "s|@PREFIX@|${prefix}|g" ${worksrcpath}/admin/qmake/3rdparty.pro.inc
    reinplace "s|@BOOST_LPATH@|[boost::lib_dir]|" ${worksrcpath}/admin/qmake/3rdparty.pro.inc
}

universal_variant       no
