--- util/cacheflush.c.orig	2023-08-11 06:51:48.000000000 +0800
+++ util/cacheflush.c	2023-08-18 23:46:35.000000000 +0800
@@ -70,7 +70,7 @@
     g_free(buf);
 }
 
-#elif defined(CONFIG_DARWIN)
+#elif defined(CONFIG_DARWIN) && !defined(__POWERPC__)
 # include <sys/sysctl.h>
 static void sys_cache_info(int *isize, int *dsize)
 {
@@ -187,7 +187,7 @@
     } else if (*dsize) {
         *isize = *dsize;
     } else {
-#if defined(_ARCH_PPC)
+#if defined(_ARCH_PPC) || defined(__ppc__)
         /*
          * For PPC, we're going to use the cache sizes computed for
          * flush_idcache_range.  Which means that we must use the
