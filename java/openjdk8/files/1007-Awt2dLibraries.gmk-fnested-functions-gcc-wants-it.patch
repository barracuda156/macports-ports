From b40673c5c3ade2a62eb6166f80641a9561ae056c Mon Sep 17 00:00:00 2001
From: Sergey Fedorov <vital.had@gmail.com>
Date: Tue, 16 Apr 2024 11:35:01 +0800
Subject: [PATCH] Awt2dLibraries.gmk: -fnested-functions, gcc wants it

---
 jdk/make/lib/Awt2dLibraries.gmk | 1 +
 1 file changed, 1 insertion(+)

diff --git jdk/make/lib/Awt2dLibraries.gmk jdk/make/lib/Awt2dLibraries.gmk
index 01e0369017..cd579f7a9a 100644
--- jdk/make/lib/Awt2dLibraries.gmk
+++ jdk/make/lib/Awt2dLibraries.gmk
@@ -1370,6 +1370,7 @@ ifeq ($(OPENJDK_TARGET_OS), macosx)
       OPTIMIZATION := LOW, \
       CFLAGS := $(CFLAGS_JDKLIB) \
           $(X_CFLAGS) \
+          -fnested-functions \
           $(X_LIBS) \
           $(foreach dir, $(LIBAWT_LWAWT_DIRS), -I$(dir)) \
           -I$(JDK_TOPDIR)/src/macosx/native/sun/osxapp \
