# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem      1.0
PortGroup       clang_dependency 1.0

name            gperf
version         3.1
categories      devel
license         GPL-3+
maintainers     {mcalhoun @MarcusCalhoun-Lopez} openmaintainer

description     GNU perfect hash generator
long_description \
                Generates a perfect hash function for various input.

homepage        https://www.gnu.org/software/gperf/gperf.html
master_sites    gnu

checksums       rmd160  0bccbfd60ef68a93b407d9ce157748475775e74b \
                sha256  588546b945bba4b70b6a3a616e80b4ab466e3f33024a352fc2198112cdbb3ae2 \
                size    1215925

installs_libs   no

configure.args  --infodir=${prefix}/share/info

# Also needed by later clangs.
if {${os.platform} eq "darwin" && ${os.major} < 11 && ${cxx_stdlib} eq "libc++"} {
    clang_dependency.extra_versions 3.7
}

configure.compiler.add_deps \
                no
depends_build-append \
                port:gcc10-bootstrap
configure.cc    ${prefix}/libexec/gcc10-bootstrap/bin/gcc
configure.cxx   ${prefix}/libexec/gcc10-bootstrap/bin/g++

test.run        yes
test.target     check
