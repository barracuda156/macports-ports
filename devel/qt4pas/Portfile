# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem              1.0
PortGroup               github 1.0
PortGroup               qmake 1.0

github.setup            pikatenor qt4pas 2.5 V _Qt4.5.3
revision                0
categories              devel pascal
maintainers             {@barracuda156 gmail.com:vital.had} openmaintainer
license                 LGPL
description             Qt4 binding for FreePascal
homepage                https://wiki.lazarus.freepascal.org/Qt4_binding
long_description        {*}${description}
checksums               rmd160  58cfeb69bad701fccbd64345e49fba1aae80f4b7 \
                        sha256  119a4078c9933e94a3202dfdd46a44172a9098cbc0240491592071fe831761da \
                        size    362661
github.tarball_from     archive

depends_build-append    port:fpc

# qmake does not handle these flags
configure.universal_args-delete --disable-dependency-tracking
configure.args-delete           --disable-dependency-tracking

post-destroot {
    set pkgconfdir ${destroot}${qt_libs_dir}/pkgconfig
    xinstall -d ${pkgconfdir}
    copy ${filespath}/Qt4Pas.pc ${pkgconfdir}
    reinplace "s,@QT4_PREFIX@,${qt_libs_dir},g" ${pkgconfdir}/Qt4Pas.pc
    ln -s ${qt_libs_dir}/Qt4Pas.framework/Qt4Pas ${destroot}${qt_libs_dir}/lib${name}.dylib
}
