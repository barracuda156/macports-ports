# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem	1.0

name		slib-guile
version		1.0
revision	5

categories	devel
maintainers	nomaintainer
license         public-domain
supported_archs	noarch

description	Wrapper port to properly set up slib and guile together
long_description	Create a symbolic link and a catalog file \
			so that guile can find the slib library files.
homepage        https://www.macports.org

set guile_ver 3.0
depends_lib-append \
                path:lib/pkgconfig/guile-${guile_ver}.pc:guile-${guile_ver} \
                port:slib

distfiles

use_configure	no

build {}

destroot {
    set guile_sharedir ${prefix}/share/guile/${guile_ver}
    file mkdir ${destroot}${guile_sharedir}
    ln -s ${prefix}/lib/slib ${destroot}${guile_sharedir}/slib
}

post-activate {
    system "${prefix}/bin/guile-${guile_ver} -c \"(use-modules (ice-9 slib)) (require 'new-catalog)\""
}
